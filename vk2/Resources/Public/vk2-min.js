function h(a){return function(){return this[a]}}var k,aa=aa||{},l=this;function ba(a,b){var c=a.split("."),d=l;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return void 0!==a}function p(a){return"array"==da(a)}function ea(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function s(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function t(a){return a[ga]||(a[ga]=++ha)}var ga="closure_uid_"+(1E9*Math.random()>>>0),ha=0;
function ia(a,b,c){return a.call.apply(a.bind,arguments)}function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return u.apply(null,arguments)}
function v(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ka=Date.now||function(){return+new Date};function x(a,b){function c(){}c.prototype=b.prototype;a.ca=b.prototype;a.prototype=new c};function la(a){if(!ma.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(na,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(oa,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(pa,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(qa,"\x26quot;"));return a}var na=/&/g,oa=/</g,pa=/>/g,qa=/\"/g,ma=/[&<>\"]/;function ra(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}
function sa(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var y=Array.prototype,z=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ta=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ua=y.filter?function(a,b,c){return y.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=r(a)?
a.split(""):a,m=0;m<d;m++)if(m in g){var q=g[m];b.call(c,q,m,a)&&(e[f++]=q)}return e};function va(a){var b;a:{b=wa;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function xa(a,b){var c=z(a,b),d;(d=0<=c)&&y.splice.call(a,c,1);return d}function ya(a){return y.concat.apply(y,arguments)}function za(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Aa(a,b,c){return 2>=arguments.length?y.slice.call(a,b):y.slice.call(a,b,c)};var Ba,Ca,Da,Ea;function Fa(){return l.navigator?l.navigator.userAgent:null}Ea=Da=Ca=Ba=!1;var Ga;if(Ga=Fa()){var Ha=l.navigator;Ba=0==Ga.lastIndexOf("Opera",0);Ca=!Ba&&(-1!=Ga.indexOf("MSIE")||-1!=Ga.indexOf("Trident"));Da=!Ba&&-1!=Ga.indexOf("WebKit");Ea=!Ba&&!Da&&!Ca&&"Gecko"==Ha.product}var Ia=Ba,A=Ca,C=Ea,D=Da,Ja=l.navigator,Ka=-1!=(Ja&&Ja.platform||"").indexOf("Mac");function La(){var a=l.document;return a?a.documentMode:void 0}var Ma;
a:{var Na="",Oa;if(Ia&&l.opera)var Pa=l.opera.version,Na="function"==typeof Pa?Pa():Pa;else if(C?Oa=/rv\:([^\);]+)(\)|;)/:A?Oa=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:D&&(Oa=/WebKit\/(\S+)/),Oa)var Qa=Oa.exec(Fa()),Na=Qa?Qa[1]:"";if(A){var Ra=La();if(Ra>parseFloat(Na)){Ma=String(Ra);break a}}Ma=Na}var Sa={};
function E(a){var b;if(!(b=Sa[a])){b=0;for(var c=String(Ma).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",m=d[f]||"",q=/(\d*)(\D*)/g,w=/(\d*)(\D*)/g;do{var H=q.exec(g)||["","",""],B=w.exec(m)||["","",""];if(0==H[0].length&&0==B[0].length)break;b=((0==H[1].length?0:parseInt(H[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==H[1].length?0:parseInt(H[1],10))>(0==B[1].length?
0:parseInt(B[1],10))?1:0)||((0==H[2].length)<(0==B[2].length)?-1:(0==H[2].length)>(0==B[2].length)?1:0)||(H[2]<B[2]?-1:H[2]>B[2]?1:0)}while(0==b)}b=Sa[a]=0<=b}return b}var Ta=l.document,Ua=Ta&&A?La()||("CSS1Compat"==Ta.compatMode?parseInt(Ma,10):5):void 0;var Va=!A||A&&9<=Ua;!C&&!A||A&&A&&9<=Ua||C&&E("1.9.1");A&&E("9");var Wa=A||Ia||D;function Xa(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function F(a,b){var c=Xa(a),d=Aa(arguments,1),e=c.length+d.length;Ya(c,d);a.className=c.join(" ");return c.length==e}function G(a,b){var c=Xa(a),d=Aa(arguments,1),c=Za(c,d);a.className=c.join(" ")}function Ya(a,b){for(var c=0;c<b.length;c++)0<=z(a,b[c])||a.push(b[c])}function Za(a,b){return ua(a,function(a){return!(0<=z(b,a))})}
function $a(a,b,c){var d=Xa(a);r(b)?xa(d,b):p(b)&&(d=Za(d,b));!r(c)||0<=z(d,c)?p(c)&&Ya(d,c):d.push(c);a.className=d.join(" ")}function I(a,b){var c=Xa(a);return 0<=z(c,b)};function ab(a,b){this.width=a;this.height=b}ab.prototype.clone=function(){return new ab(this.width,this.height)};function bb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function cb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function db(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function eb(a){var b={},c;for(c in a)b[c]=a[c];return b}var fb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function gb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<fb.length;f++)c=fb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function J(a){return r(a)?document.getElementById(a):a}function K(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):hb(a,b)}function L(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):K(a,b)[0])||null}
function hb(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var g=c.getElementsByClassName(a);return g}g=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=g[d];d++){var m=c.className;"function"==typeof m.split&&0<=z(m.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return g}
function ib(a,b){bb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in jb?a.setAttribute(jb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var jb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function M(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!Va&&g&&(g.name||g.type)){f=["\x3c",f];g.name&&f.push(' name\x3d"',la(g.name),'"');if(g.type){f.push(' type\x3d"',la(g.type),'"');var m={};gb(m,g);delete m.type;g=m}f.push("\x3e");f=f.join("")}f=e.createElement(f);g&&(r(g)?f.className=g:p(g)?F.apply(null,[f].concat(g)):ib(f,g));2<d.length&&kb(e,f,d);return f}
function kb(a,b,c){function d(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!ea(f)||s(f)&&0<f.nodeType?d(f):ta(lb(f)?za(f):f,d)}}function mb(a,b){a.appendChild(b)}function nb(a,b){var c=[];return ob(a,b,c,!0)?c[0]:void 0}function pb(a,b){var c=[];ob(a,b,c,!1);return c}function ob(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||ob(a,b,c,d))return!0;a=a.nextSibling}return!1}
function lb(a){if(a&&"number"==typeof a.length){if(s(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"==da(a))return"function"==typeof a.item}return!1};var qb=!A||A&&9<=Ua,rb=A&&!E("9");!D||E("528");C&&E("1.9b")||A&&E("8")||Ia&&E("9.5")||D&&E("528");C&&!E("8")||A&&E("9");function sb(){0!=tb&&(this.pc=Error().stack,ub[t(this)]=this)}var tb=0,ub={};sb.prototype.Ja=!1;sb.prototype.K=function(){if(!this.Ja&&(this.Ja=!0,this.v(),0!=tb)){var a=t(this);delete ub[a]}};sb.prototype.v=function(){if(this.wb)for(;this.wb.length;)this.wb.shift()()};function N(a,b){this.type=a;this.currentTarget=this.target=b}k=N.prototype;k.v=function(){};k.K=function(){};k.G=!1;k.defaultPrevented=!1;k.Db=!0;k.stopPropagation=function(){this.G=!0};k.preventDefault=function(){this.defaultPrevented=!0;this.Db=!1};function vb(a){vb[" "](a);return a}vb[" "]=ca;function O(a,b){a&&wb(this,a,b)}x(O,N);k=O.prototype;k.target=null;k.relatedTarget=null;k.offsetX=0;k.offsetY=0;k.clientX=0;k.clientY=0;k.screenX=0;k.screenY=0;k.button=0;k.keyCode=0;k.charCode=0;k.ctrlKey=!1;k.altKey=!1;k.shiftKey=!1;k.metaKey=!1;k.ac=!1;k.D=null;
function wb(a,b,c){var d=a.type=b.type;N.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(C){var e;a:{try{vb(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=D||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=D||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.ac=Ka?b.metaKey:b.ctrlKey;a.state=b.state;a.D=b;b.defaultPrevented&&a.preventDefault();delete a.G}k.stopPropagation=function(){O.ca.stopPropagation.call(this);this.D.stopPropagation?this.D.stopPropagation():this.D.cancelBubble=!0};
k.preventDefault=function(){O.ca.preventDefault.call(this);var a=this.D;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,rb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};k.v=function(){};var xb="closure_listenable_"+(1E6*Math.random()|0),yb=0;function zb(a,b,c,d,e,f){this.w=a;this.Ab=b;this.src=c;this.type=d;this.capture=!!e;this.R=f;this.key=++yb;this.H=this.P=!1}function Ab(a){a.H=!0;a.w=null;a.Ab=null;a.src=null;a.R=null};var Bb={},P={},Cb={},Db={};function Q(a,b,c,d,e){if(p(b)){for(var f=0;f<b.length;f++)Q(a,b[f],c,d,e);return null}c=Eb(c);return a&&a[xb]?a.r.add(b,c,!1,d,e):Fb(a,b,c,!1,d,e)}
function Fb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=P;b in g||(g[b]={b:0});g=g[b];e in g||(g[e]={b:0},g.b++);var g=g[e],m=t(a),q;if(g[m]){q=g[m];for(var w=0;w<q.length;w++)if(g=q[w],g.w==c&&g.R==f){if(g.H)break;d||(q[w].P=!1);return q[w]}}else q=g[m]=[],g.b++;w=Gb();g=new zb(c,w,a,b,e,f);g.P=d;w.src=a;w.w=g;q.push(g);Cb[m]||(Cb[m]=[]);Cb[m].push(g);a.addEventListener?a.addEventListener(b,w,e):a.attachEvent(b in Db?Db[b]:Db[b]="on"+b,w);return Bb[g.key]=g}
function Gb(){var a=Hb,b=qb?function(c){return a.call(b.src,b.w,c)}:function(c){c=a.call(b.src,b.w,c);if(!c)return c};return b}function Ib(a,b,c,d,e){if(p(b))for(var f=0;f<b.length;f++)Ib(a,b[f],c,d,e);else c=Eb(c),a&&a[xb]?a.r.add(b,c,!0,d,e):Fb(a,b,c,!0,d,e)}
function Jb(a,b,c,d,e){if(p(b))for(var f=0;f<b.length;f++)Jb(a,b[f],c,d,e);else if(c=Eb(c),a&&a[xb])a.r.remove(b,c,d,e);else{d=!!d;a:{f=P;if(b in f&&(f=f[b],d in f&&(f=f[d],a=t(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].w==c&&a[f].capture==d&&a[f].R==e){Kb(a[f]);break}}}
function Kb(a){if(!fa(a)&&a&&!a.H){var b=a.src;if(b&&b[xb])Lb(b.r,a);else{var c=a.type,d=a.Ab,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in Db?Db[c]:Db[c]="on"+c,d);b=t(b);Cb[b]&&(d=Cb[b],xa(d,a),0==d.length&&delete Cb[b]);Ab(a);if(d=P[c][e][b])xa(d,a),0==d.length&&(delete P[c][e][b],P[c][e].b--),0==P[c][e].b&&(delete P[c][e],P[c].b--),0==P[c].b&&delete P[c];delete Bb[a.key]}}}
function Mb(a,b,c){var d=1;b=t(b);if(a[b])for(a=za(a[b]),b=0;b<a.length;b++){var e=a[b];e&&!e.H&&(d&=!1!==Nb(e,c))}return Boolean(d)}function Nb(a,b){var c=a.w,d=a.R||a.src;a.P&&Kb(a);return c.call(d,b)}
function Hb(a,b){if(a.H)return!0;var c=a.type,d=P;if(!(c in d))return!0;var d=d[c],e,f;if(!qb){if(!(c=b))a:{for(var c=["window","event"],g=l;e=c.shift();)if(null!=g[e])g=g[e];else{c=null;break a}c=g}e=c;c=!0 in d;g=!1 in d;if(c){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var m=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(q){m=!0}if(m||void 0==e.returnValue)e.returnValue=!0}}m=new O;wb(m,e,this);e=!0;try{if(c){for(var w=[],H=m.currentTarget;H;H=H.parentNode)w.push(H);f=d[!0];for(var B=
w.length-1;!m.G&&0<=B;B--)m.currentTarget=w[B],e&=Mb(f,w[B],m);if(g)for(f=d[!1],B=0;!m.G&&B<w.length;B++)m.currentTarget=w[B],e&=Mb(f,w[B],m)}else e=Nb(a,m)}finally{w&&(w.length=0)}return e}d=new O(b,this);return e=Nb(a,d)}var Ob="__closure_events_fn_"+(1E9*Math.random()>>>0);function Eb(a){return"function"==da(a)?a:a[Ob]||(a[Ob]=function(b){return a.handleEvent(b)})};function Pb(a){this.src=a;this.k={};this.ua=0}Pb.prototype.add=function(a,b,c,d,e){var f=this.k[a];f||(f=this.k[a]=[],this.ua++);var g=Qb(f,b,d,e);-1<g?(a=f[g],c||(a.P=!1)):(a=new zb(b,null,this.src,a,!!d,e),a.P=c,f.push(a));return a};Pb.prototype.remove=function(a,b,c,d){if(!(a in this.k))return!1;var e=this.k[a];b=Qb(e,b,c,d);return-1<b?(Ab(e[b]),y.splice.call(e,b,1),0==e.length&&(delete this.k[a],this.ua--),!0):!1};
function Lb(a,b){var c=b.type;c in a.k&&xa(a.k[c],b)&&(Ab(b),0==a.k[c].length&&(delete a.k[c],a.ua--))}function Qb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.H&&f.w==b&&f.capture==!!c&&f.R==d)return e}return-1};function R(){sb.call(this);this.r=new Pb(this);this.Qb=this}x(R,sb);R.prototype[xb]=!0;k=R.prototype;k.Ua=null;k.addEventListener=function(a,b,c,d){Q(this,a,b,c,d)};k.removeEventListener=function(a,b,c,d){Jb(this,a,b,c,d)};
k.dispatchEvent=function(a){var b,c=this.Ua;if(c)for(b=[];c;c=c.Ua)b.push(c);var c=this.Qb,d=a.type||a;if(r(a))a=new N(a,c);else if(a instanceof N)a.target=a.target||c;else{var e=a;a=new N(d,c);gb(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.G&&0<=g;g--)f=a.currentTarget=b[g],e=Rb(f,d,!0,a)&&e;a.G||(f=a.currentTarget=c,e=Rb(f,d,!0,a)&&e,a.G||(e=Rb(f,d,!1,a)&&e));if(b)for(g=0;!a.G&&g<b.length;g++)f=a.currentTarget=b[g],e=Rb(f,d,!1,a)&&e;return e};
k.v=function(){R.ca.v.call(this);if(this.r){var a=this.r,b=0,c;for(c in a.k){for(var d=a.k[c],e=0;e<d.length;e++)++b,d[e].H=!0;delete a.k[c];a.ua--}}this.Ua=null};function Rb(a,b,c,d){b=a.r.k[b];if(!b)return!0;b=za(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.H&&g.capture==c){var m=g.w,q=g.R||g.src;g.P&&Lb(a.r,g);e=!1!==m.call(q,d)&&e}}return e&&!1!=d.Db};function Sb(a,b,c){if("function"==da(a))c&&(a=u(a,c));else if(a&&"function"==typeof a.handleEvent)a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:l.setTimeout(a,b||0)};function Tb(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Ub(a){if("function"==typeof a.s)return a.s();if(r(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return cb(a)}function Vb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ea(a)||r(a))ta(a,b,c);else{var d;if("function"==typeof a.getKeys)d=a.getKeys();else if("function"!=typeof a.s)if(ea(a)||r(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=db(a);else d=void 0;for(var e=Ub(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function Wb(a,b){this.c={};this.g=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Wb?(c=a.getKeys(),d=a.s()):(c=db(a),d=cb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}k=Wb.prototype;k.b=0;k.Za=0;k.Na=h("b");k.s=function(){Xb(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.c[this.g[b]]);return a};k.getKeys=function(){Xb(this);return this.g.concat()};
k.q=function(a){return Yb(this.c,a)};k.equals=function(a,b){if(this===a)return!0;if(this.b!=a.Na())return!1;var c=b||Zb;Xb(this);for(var d,e=0;d=this.g[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Zb(a,b){return a===b}k.clear=function(){this.c={};this.Za=this.b=this.g.length=0};k.remove=function(a){return Yb(this.c,a)?(delete this.c[a],this.b--,this.Za++,this.g.length>2*this.b&&Xb(this),!0):!1};
function Xb(a){if(a.b!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Yb(a.c,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.b!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],Yb(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}k.get=function(a,b){return Yb(this.c,a)?this.c[a]:b};k.set=function(a,b){Yb(this.c,a)||(this.b++,this.g.push(a),this.Za++);this.c[a]=b};k.clone=function(){return new Wb(this)};function Yb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function $b(){};function ac(){}ac.prototype.ia=null;var bc;function cc(){}x(cc,ac);function dc(a){return(a=ec(a))?new ActiveXObject(a):new XMLHttpRequest}function fc(a){var b={};ec(a)&&(b[0]=!0,b[1]=!0);return b}
function ec(a){if(!a.ob&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.ob=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.ob}bc=new cc;var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?\x3d[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function hc(a){if(ic){ic=!1;var b=l.location;if(b){var c=b.href;if(c&&(c=(c=hc(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw ic=!0,Error();}}return a.match(gc)}var ic=D;function jc(a){R.call(this);this.headers=new Wb;this.T=a||null;this.h=!1;this.ya=this.a=null;this.tb=this.qa="";this.aa=0;this.ba="";this.L=this.Oa=this.na=this.La=!1;this.da=0;this.ta=null;this.Cb=kc;this.wa=this.ec=!1}x(jc,R);var kc="",lc=/^https?$/i,mc=["POST","PUT"],nc=[];function oc(a,b,c,d){var e=new jc;nc.push(e);b&&e.r.add("complete",b,!1,void 0,void 0);e.r.add("ready",e.Sb,!0,void 0,void 0);e.send(a,c,d,void 0)}k=jc.prototype;k.Sb=function(){this.K();xa(nc,this)};
k.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request\x3d"+this.qa+"; newUri\x3d"+a);b=b?b.toUpperCase():"GET";this.qa=a;this.ba="";this.aa=0;this.tb=b;this.La=!1;this.h=!0;this.a=this.T?dc(this.T):dc(bc);this.ya=this.T?this.T.ia||(this.T.ia=fc(this.T)):bc.ia||(bc.ia=fc(bc));this.a.onreadystatechange=u(this.xb,this);try{$b(S(this,"Opening Xhr")),this.Oa=!0,this.a.open(b,a,!0),this.Oa=!1}catch(e){$b(S(this,"Error opening Xhr: "+e.message));pc(this,e);
return}a=c||"";var f=this.headers.clone();d&&Vb(d,function(a,b){f.set(b,a)});d=va(f.getKeys());c=l.FormData&&a instanceof l.FormData;!(0<=z(mc,b))||(d||c)||f.set("Content-Type","application/x-www-form-urlencoded;charset\x3dutf-8");Vb(f,function(a,b){this.a.setRequestHeader(b,a)},this);this.Cb&&(this.a.responseType=this.Cb);"withCredentials"in this.a&&(this.a.withCredentials=this.ec);try{qc(this),0<this.da&&(this.wa=A&&E(9)&&fa(this.a.timeout)&&n(this.a.ontimeout),$b(S(this,"Will abort after "+this.da+
"ms if incomplete, xhr2 "+this.wa)),this.wa?(this.a.timeout=this.da,this.a.ontimeout=u(this.Fb,this)):this.ta=Sb(this.Fb,this.da,this)),$b(S(this,"Sending request")),this.na=!0,this.a.send(a),this.na=!1}catch(g){$b(S(this,"Send error: "+g.message)),pc(this,g)}};function wa(a){return"content-type"==a.toLowerCase()}k.Fb=function(){"undefined"!=typeof aa&&this.a&&(this.ba="Timed out after "+this.da+"ms, aborting",this.aa=8,S(this,this.ba),this.dispatchEvent("timeout"),this.abort(8))};
function pc(a,b){a.h=!1;a.a&&(a.L=!0,a.a.abort(),a.L=!1);a.ba=b;a.aa=5;rc(a);sc(a)}function rc(a){a.La||(a.La=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}k.abort=function(a){this.a&&this.h&&(S(this,"Aborting"),this.h=!1,this.L=!0,this.a.abort(),this.L=!1,this.aa=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),sc(this))};k.v=function(){this.a&&(this.h&&(this.h=!1,this.L=!0,this.a.abort(),this.L=!1),sc(this,!0));jc.ca.v.call(this)};
k.xb=function(){this.Ja||(this.Oa||this.na||this.L?tc(this):this.$b())};k.$b=function(){tc(this)};
function tc(a){if(a.h&&"undefined"!=typeof aa)if(a.ya[1]&&4==uc(a)&&2==vc(a))S(a,"Local request error detected and ignored");else if(a.na&&4==uc(a))Sb(a.xb,0,a);else if(a.dispatchEvent("readystatechange"),a.Pa()){S(a,"Request complete");a.h=!1;try{var b=vc(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var f=hc(String(a.qa))[1]||null;if(!f&&self.location)var g=self.location.protocol,f=g.substr(0,g.length-1);
e=!lc.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.aa=6;var m;try{m=2<uc(a)?a.a.statusText:""}catch(q){m=""}a.ba=m+" ["+vc(a)+"]";rc(a)}}finally{sc(a)}}}function sc(a,b){if(a.a){qc(a);var c=a.a,d=a.ya[0]?ca:null;a.a=null;a.ya=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function qc(a){a.a&&a.wa&&(a.a.ontimeout=null);fa(a.ta)&&(l.clearTimeout(a.ta),a.ta=null)}k.Pa=function(){return 4==uc(this)};
function uc(a){return a.a?a.a.readyState:0}function vc(a){try{return 2<uc(a)?a.a.status:-1}catch(b){return-1}}function wc(a){try{return a.a?a.a.responseText:""}catch(b){return""}}function xc(a){try{return a.a?a.a.responseXML:null}catch(b){return null}}function T(a){if(a.a)return Tb(a.a.responseText)}function S(a,b){return b+" ["+a.tb+" "+a.qa+" "+vc(a)+"]"};function U(a,b){var c;if(a instanceof U)this.n=n(b)?b:a.n,yc(this,a.S),c=a.xa,V(this),this.xa=c,c=a.Z,V(this),this.Z=c,zc(this,a.sa),c=a.ra,V(this),this.ra=c,Ac(this,a.l.clone()),c=a.ma,V(this),this.ma=c;else if(a&&(c=hc(String(a)))){this.n=!!b;yc(this,c[1]||"",!0);var d=c[2]||"";V(this);this.xa=d?decodeURIComponent(d):"";d=c[3]||"";V(this);this.Z=d?decodeURIComponent(d):"";zc(this,c[4]);d=c[5]||"";V(this);this.ra=d?decodeURIComponent(d):"";Ac(this,c[6]||"",!0);c=c[7]||"";V(this);this.ma=c?decodeURIComponent(c):
""}else this.n=!!b,this.l=new Bc(null,0,this.n)}k=U.prototype;k.S="";k.xa="";k.Z="";k.sa=null;k.ra="";k.ma="";k.Xb=!1;k.n=!1;k.toString=function(){var a=[],b=this.S;b&&a.push(Cc(b,Dc),":");if(b=this.Z){a.push("//");var c=this.xa;c&&a.push(Cc(c,Dc),"@");a.push(encodeURIComponent(String(b)));b=this.sa;null!=b&&a.push(":",String(b))}if(b=this.ra)this.Z&&"/"!=b.charAt(0)&&a.push("/"),a.push(Cc(b,"/"==b.charAt(0)?Ec:Fc));(b=this.l.toString())&&a.push("?",b);(b=this.ma)&&a.push("#",Cc(b,Gc));return a.join("")};
k.clone=function(){return new U(this)};function yc(a,b,c){V(a);a.S=c?b?decodeURIComponent(b):"":b;a.S&&(a.S=a.S.replace(/:$/,""))}function zc(a,b){V(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.sa=b}else a.sa=null}function Ac(a,b,c){V(a);b instanceof Bc?(a.l=b,a.l.Wa(a.n)):(c||(b=Cc(b,Hc)),a.l=new Bc(b,0,a.n))}function Ic(a){return a.l}function V(a){if(a.Xb)throw Error("Tried to modify a read-only Uri");}k.Wa=function(a){this.n=a;this.l&&this.l.Wa(a);return this};
function Cc(a,b){return r(a)?encodeURI(a).replace(b,Jc):null}function Jc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dc=/[#\/\?@]/g,Fc=/[\#\?:]/g,Ec=/[\#\?]/g,Hc=/[\#\?@]/g,Gc=/#/g;function Bc(a,b,c){this.i=a||null;this.n=!!c}
function W(a){if(!a.d&&(a.d=new Wb,a.b=0,a.i))for(var b=a.i.split("\x26"),c=0;c<b.length;c++){var d=b[c].indexOf("\x3d"),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=X(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}k=Bc.prototype;k.d=null;k.b=null;k.Na=function(){W(this);return this.b};k.add=function(a,b){W(this);this.i=null;a=X(this,a);var c=this.d.get(a);c||this.d.set(a,c=[]);c.push(b);this.b++;return this};
k.remove=function(a){W(this);a=X(this,a);return this.d.q(a)?(this.i=null,this.b-=this.d.get(a).length,this.d.remove(a)):!1};k.clear=function(){this.d=this.i=null;this.b=0};k.q=function(a){W(this);a=X(this,a);return this.d.q(a)};k.getKeys=function(){W(this);for(var a=this.d.s(),b=this.d.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
k.s=function(a){W(this);var b=[];if(a)this.q(a)&&(b=ya(b,this.d.get(X(this,a))));else{a=this.d.s();for(var c=0;c<a.length;c++)b=ya(b,a[c])}return b};k.set=function(a,b){W(this);this.i=null;a=X(this,a);this.q(a)&&(this.b-=this.d.get(a).length);this.d.set(a,[b]);this.b++;return this};k.get=function(a,b){var c=a?this.s(a):[];return 0<c.length?String(c[0]):b};
k.toString=function(){if(this.i)return this.i;if(!this.d)return"";for(var a=[],b=this.d.getKeys(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.s(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="\x3d"+encodeURIComponent(String(d[f])));a.push(g)}return this.i=a.join("\x26")};k.clone=function(){var a=new Bc;a.i=this.i;this.d&&(a.d=this.d.clone(),a.b=this.b);return a};function X(a,b){var c=String(b);a.n&&(c=c.toLowerCase());return c}
k.Wa=function(a){a&&!this.n&&(W(this),this.i=null,Vb(this.d,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.i=null,this.d.set(X(this,d),za(a)),this.b+=a.length))},this));this.n=a};k.extend=function(a){for(var b=0;b<arguments.length;b++)Vb(arguments[b],function(a,b){this.add(b,a)},this)};function Kc(a,b,c){var d;a:if(d=ra(c),void 0===a.style[d]&&(c=(D?"Webkit":C?"Moz":A?"ms":Ia?"O":null)+sa(c),void 0!==a.style[c])){d=c;break a}d&&(a.style[d]=b)}
function Lc(a){var b=Mc,c;a:{c=9==a.nodeType?a:a.ownerDocument||a.document;if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c.display||c.getPropertyValue("display")||"";break a}c=""}if("none"!=(c||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);c=a.style;var d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function Mc(a){var b=a.offsetWidth,c=a.offsetHeight,d=D&&!b&&!c;if((!n(b)||d)&&a.getBoundingClientRect){var e;a:{try{e=a.getBoundingClientRect()}catch(f){e={left:0,top:0,right:0,bottom:0};break a}A&&(a=a.ownerDocument,e.left-=a.documentElement.clientLeft+a.body.clientLeft,e.top-=a.documentElement.clientTop+a.body.clientTop)}return new ab(e.right-e.left,e.bottom-e.top)}return new ab(b,c)};function Nc(a){this.Y=a}var Oc=/\s*;\s*/;k=Nc.prototype;k.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');n(c)||(c=-1);e=e?";domain\x3d"+e:"";d=d?";path\x3d"+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires\x3d"+(new Date(1970,1,1)).toUTCString():";expires\x3d"+(new Date(ka()+1E3*c)).toUTCString();this.Y.cookie=a+"\x3d"+b+e+d+c+f};
k.get=function(a,b){for(var c=a+"\x3d",d=(this.Y.cookie||"").split(Oc),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};k.remove=function(a,b,c){var d=this.q(a);this.set(a,"",0,b,c);return d};k.getKeys=function(){return Pc(this).keys};k.s=function(){return Pc(this).dc};k.Na=function(){return this.Y.cookie?(this.Y.cookie||"").split(Oc).length:0};k.q=function(a){return n(this.get(a))};k.clear=function(){for(var a=Pc(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function Pc(a){a=(a.Y.cookie||"").split(Oc);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("\x3d"),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,dc:c}}var Qc=new Nc(document);Qc.fc=3950;function Rc(a){var b=Lc(J("spatialsearch-container")),c=Lc(J("layermanagement-container")),d=Lc(J("mapdiv")),c=d.width-c.width-30,b=a.getCoordinateFromPixel([0+b.width+30,d.height-25-30]);a=a.getCoordinateFromPixel([c,35]);return[b[0],b[1],a[0],a[1]]}function Sc(a){return Ic(n(a)?new U(a):new U(window.location.href))}
function Tc(a,b){var c;if(I(a,b))c=a;else{c=Tc;var d;d=a;!Wa||A&&E("9")&&!E("10")&&l.SVGElement&&d instanceof l.SVGElement?(d=d.parentNode,d=s(d)&&1==d.nodeType?d:null):d=d.parentElement;c=c(d,b)}return c}function Y(a){if(!n(a))return"";try{if(n(window.lang_dictionary))return window.lang_dictionary[a]}catch(b){return""}}
function Uc(a){a=K(a,(n(void 0)?void 0:document.body).body);for(var b=0;b<a.length;b++)Q(a[b],"click",function(a){a.preventDefault();try{var b=new Vc("vk2-overlay-modal",document.body,!0),e=this.getAttribute("data-title"),f=this.getAttribute("data-classes");b.open(e,f,{href:this.href,classes:f});a.preventDefault()}catch(g){}})}function Wc(a,b,c){var d=new jc;Ib(d,"success",function(a){a=a.target;n(b)&&b(a);a.K()});Ib(d,"error",function(a){a=a.target;n(c)&&c(a)});d.send(a)}
function Xc(){var a=window.location.origin;window.location.origin||(a=window.location.protocol+"//"+window.location.host);Yc=a+"/vkviewer/proxy/?url\x3d"};function Zc(a){a=a||{};var b=document.createElement("a");b.href="#image-manipulation";b.innerHTML="I";b.className="ol-has-tooltip";var c=M("span",{role:"tooltip",innerHTML:Y("openImagemanipulation")});b.appendChild(c);c=u(function(a){a.preventDefault();I(a.target,"active")?(G(a.target,"active"),$(this.Xa).fadeOut().removeClass("open")):(F(a.target,"active"),n(this.Xa)||(this.Xa=$c(this,a.currentTarget.parentElement)),$(this.Xa).fadeIn().addClass("open"))},this);Q(b,"click",c,void 0,this);Q(b,"touchstart",
c,void 0,this);c=document.createElement("div");c.className="image-manipulation ol-unselectable";c.appendChild(b);ol.control.Control.call(this,{element:c,target:a.target})}ol.inherits(Zc,ol.control.Control);
function ad(a,b,c,d,e){e=M("div",{"class":"slider "+b,title:n("opt_title")?e:""});var f=n(d)?d:100;$(e).slider({min:0,max:100,value:f,animate:"slow",orientation:"horizontal",step:1,slide:function(a,b){var d=b.value,e=g;e.style.left=100*((d-0)/100)+"%";e.innerHTML=d+"%";c(d)},change:u(function(a,b){var d=b.value,e=g;e.style.left=100*((d-0)/100)+"%";e.innerHTML=d+"%";c(d)},a)});var g=M("div",{"class":"tooltip value "+b,innerHTML:n(d)?d+"%":"100%"});e.appendChild(g);return e}
function bd(a){return a.getMap().getLayers().getArray()[0]}
function $c(a,b){var c=M("div",{"class":"slider-container",style:"display:none;"});b.appendChild(c);var d=ad(a,"slider-contrast",u(function(a){bd(this).setContrast(a/100)},a),void 0,Y("contrast"));c.appendChild(d);d=ad(a,"slider-saturation",u(function(a){bd(this).setSaturation(a/100)},a),void 0,Y("saturation"));c.appendChild(d);d=ad(a,"slider-brightness",u(function(a){a=2*a/100-1;bd(this).setBrightness(a)},a),50,Y("brightness"));c.appendChild(d);d=ad(a,"slider-hue",u(function(a){a=0.25*(a-50);a=0==
a?0:a+bd(this).getHue();bd(this).setHue(a)},a),50,Y("hue"));c.appendChild(d);d=M("button",{"class":"reset-btn",title:Y("reset"),innerHTML:"Reset"});c.appendChild(d);Q(d,"click",function(){var a=bd(this);a.setHue(0);a.setBrightness(0);a.setContrast(1);a.setSaturation(1);for(var a=K("slider",c),b=0;b<a.length;b++){var d=a[b],m=I(d,"slider-hue")||I(d,"slider-brightness")?50:100;$(d).slider("value",m)}},void 0,a);return c};function cd(a,b){var c;if("geometry"in b)if(c=b.geometry.coordinates[0],"polygon"===b.geometry.type.toLowerCase()){for(var d=[],e=0,f=c.length;e<f;e++)d.push(ol.proj.transform(c[e],"EPSG:4326","EPSG:900913"));c=new ol.geom.Polygon([d])}else c=void 0;else c=void 0;delete b.geometry;c=new ol.Feature({geometry:c});for(var g in b)b.hasOwnProperty(g)&&("time"===g?c.set(g,b[g].split("-")[0]):c.set(g,b[g]));c.setId(a);return c}
function dd(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(cd(a[c]._id,a[c]._source));return b};var Yc="/vkviewer/proxy/?url\x3d",ed={projection:"EPSG:900913",sc:1.194328566789627,rc:2445.9849047851562,extent:[640161.933,5958026.134,3585834.8011505,7847377.4901306],nc:[1528150,6630500],zoom:2},fd=["http://vk2-cdn1.slub-dresden.de/tms/","http://vk2-cdn2.slub-dresden.de/tms/","http://vk2-cdn3.slub-dresden.de/tms/"];function gd(){return{query:{filtered:{filter:{bool:{must:[]}}}},sort:{}}}function hd(a){var b={geo_shape:{}};b.geo_shape.geometry={relation:"intersects",shape:{type:"polygon",coordinates:[a]}};return b}function id(a){for(var b=[],c={bool:{should:b}},d=0;d<a.length;d++){var e=a[d],f={term:{}};f.term[e.key]=e.value.toLowerCase();b.push(f)}return c}function jd(a){var b={range:{}};b.range.time={gte:a[0],lte:a[1]};return b}
function kd(a,b){var c=JSON.stringify({ids:a});oc("http://194.95.145.46/spatialdocuments/map/_mget",b,"POST",c)};function ld(a,b,c){this.t=r(a)?J(a):a;a=M("div",{"class":"container"});this.t.appendChild(a);var d=M("div",{"class":"row-metadata"});a.appendChild(d);a=M("div",{"class":"col-md-8 col-lg-8 metdata-col"});d.appendChild(a);var e=M("div",{"class":"col-md-4 col-lg-4 thumbnail-col"});d.appendChild(e);this.Ea(a,c.description);d=M("img",{"class":"thumbnail",src:c.thumb});e.appendChild(d);var f=Y("mdrecord_keyword"),e=c.keywords,d=md(a),f=M("div",{"class":"label",innerHTML:f});d.appendChild(f);e=M("div",{innerHTML:e});
d.appendChild(e);for(d=0;d<c["online-resources"].length;d++){var f=Y("mdrecord_onlineresource"),e=c["online-resources"][d].url,g=md(a),f=M("div",{"class":"label",innerHTML:f});g.appendChild(f);f=M("div");g.appendChild(f);var g=new U(e),m=!1;n(g.l.get("SERVICE"))&&("wcs"==g.l.get("SERVICE").toLowerCase()&&g.l.get("REQUEST")&&"getcoverage"==g.l.get("REQUEST").toLowerCase())&&(m=!0);Ac(g,"",void 0);e=m?M("a",{target:"_blank",href:e,innerHTML:g.toString(),"class":"download"}):M("a",{target:"_blank",href:e,
innerHTML:g.toString()});f.appendChild(e)}e=Y("mdrecord_spatialresolution");c=c.denominator;d=md(a);e=M("div",{"class":"label",innerHTML:e});d.appendChild(e);e=M("div");d.appendChild(e);d=M("label",{innerHTML:""});e.appendChild(d);c=M("span",{innerHTML:c});e.appendChild(c);b=M("span",{"class":"unique-id metadata-content-row",innerHTML:'\x3cdiv class\x3d"label"\x3e'+Y("mdrecord_uniqueid")+"\x3c/div\x3e\x3cdiv\x3e"+b+"\x3c/div\x3e"});a.appendChild(b)}
ld.prototype.Ea=function(a,b){var c=M("div",{"class":"description"});a.appendChild(c);var d=M("h3",{innerHTML:b});c.appendChild(d)};function md(a){var b=M("div",{"class":"metadata-content-row"});a.appendChild(b);return b};function nd(a,b,c,d){var e=n(c)?"webgl":"canvas",f=n(d)?d:!1;oc(b,u(function(c){200!=vc(c.target)&&alert("Something went wrong, while trying to get the process information from the server. Please try again or contact the administrator.");c=xc(c.target);var d=nb(c,function(a){return 1==a.nodeType&&"IMAGE_PROPERTIES"==a.tagName});c=parseInt(d.getAttribute("WIDTH"),0);d=parseInt(d.getAttribute("HEIGHT"),0);od(this,b.substring(0,b.lastIndexOf("/")+1),d,c,a,e,f)},this),"GET");R.call(this)}x(nd,R);
function od(a,b,c,d,e,f,g){a.hc=c;a.lc=d;var m=new ol.proj.Projection({code:"ZOOMIFY",units:"pixels",extent:[0,0,d,c]});a.Pb=new ol.source.Zoomify({url:b,size:[d,c],crossOrigin:"*"});b=new ol.View({projection:m,center:[d/2,-c/2],zoom:1,maxZoom:9});c=new ol.layer.Tile({source:a.Pb});d=[new ol.control.FullScreen,new ol.control.Zoom];g&&d.push(new ol.control.OverviewMap({collapsed:!1,layers:[c]}));a.p=new ol.Map({layers:[c],interactions:ol.interaction.defaults().extend([new ol.interaction.DragZoom]),
controls:d,renderer:f,target:e,view:b});a.p.addControl(new ol.control.ZoomToExtent({extent:b.calculateExtent(a.p.getSize())}));a.dispatchEvent(new N("loadend",{}))}nd.prototype.getMap=h("p");function pd(a,b){var c=a.getProperties();J(b.titleshortId).innerHTML=c.title;J(b.titlelongId).innerHTML=c.titlelong;J(b.linkToFotothekId).href=c.plink;if(ol.has.WEBGL)d=new nd(b.zoomifyContainer,c.zoomify,!0),new ld(b.metadataContainer,a.getId(),c),Q(d,"loadend",function(){d.getMap().addControl(new Zc)});else{var d=new nd(b.zoomifyContainer,c.zoomify);new ld(b.metadataContainer,a.getId(),c)}};function Vc(a,b,c){a=M("div",{"class":"modal fade "+a,id:a});var d=M("div",{"class":"modal-dialog"});a.appendChild(d);var e=M("div",{"class":"modal-content"});d.appendChild(e);this.ha=M("div",{"class":"modal-header"});e.appendChild(this.ha);d=M("button",{"class":"close",type:"button","data-dismiss":"modal","aria-hidden":"true",innerHTML:"\x26times;"});this.ha.appendChild(d);d=M("h4",{"class":"modal-title"});this.ha.appendChild(d);d=M("div",{"class":"modal-body"});e.appendChild(d);d=M("div",{"class":"modal-footer"});
e.appendChild(d);e=M("button",{"class":"btn btn-default",type:"button","data-dismiss":"modal",innerHTML:"Close"});d.appendChild(e);this.A=a;b.appendChild(this.A);qd(this.A,c||!1)}
function rd(a,b){for(var c=pb(b,function(a){return"a"===a.nodeName.toLowerCase()&&a.hasOwnProperty("href")}),d=L("modal-content",a.A),e=0;e<c.length;e++){var f=c[e];if(!f.hasAttribute("target")||"_self"===f.getAttribute("target")){f.setAttribute("data-href",f.href);f.href="#";var g=n("map-profile")?"map-profile":f.hasAttribute("data-classname")?f.getAttribute("data-classname"):"";Q(f,"click",v(function(a,b){b.preventDefault();var c=b.currentTarget.getAttribute("data-href");sd(this,{href:c,classes:a});
d.className="modal-content "+a;return!1},g),void 0,a)}}}function qd(a,b){$(a).on("hidden.bs.modal",function(){L("modal-body",this).innerHTML="";L("modal-title",this.A).innerHTML="";L("modal-content",this).className="modal-content";b&&this&&this.parentNode&&this.parentNode.removeChild(this)})}
function sd(a,b){var c=L("modal-body",a.A);c.innerHTML="";var d=M("iframe",{frameborder:"0",src:b.href});d.setAttribute("webkitallowfullscreen","");d.setAttribute("mozallowfullscreen","");d.setAttribute("allowfullscreen","");n(b.width)&&(r("width")?Kc(d,b.width,"width"):bb("width",v(Kc,d)));n(b.height)&&(r("height")?Kc(d,b.height,"height"):bb("height",v(Kc,d)));n(b.classes)&&F(d,b.classes);c.appendChild(d)}Vc.prototype.Ea=function(a){L("modal-title",this.A).innerHTML=a};
Vc.prototype.open=function(a,b,c){null!=a&&a?this.Ea(a):this.ha.style.display="none";n(b)&&(a=L("modal-content",this.A),F(a,b));n(c)&&sd(this,c);$(this.A).modal("show")};function td(a){this.t=r(a)?J(a):a;this.J(this.t);this.Ba(this.X);R.call(this)}x(td,R);td.prototype.J=function(a){var b=M("div",{"class":"timeslider-container"});a.appendChild(b);a=M("label",{innerHTML:Y("change_timeperiod")});b.appendChild(a);a=M("div",{"class":"slider-container"});b.appendChild(a);this.X=M("div",{"class":"slider"});a.appendChild(this.X)};
td.prototype.Ba=function(a){function b(a,b){b.style.left=100*((a-1868)/77)+"%";b.innerHTML=a}var c,d;$(a).slider({range:!0,min:1868,max:1945,values:[1868,1945],animate:"slow",orientation:"horizontal",step:1,slide:function(a,f){var g=f.values;b(g[0],c);b(g[1],d)},change:u(function(a,f){var g=f.values;b(g[0],c);b(g[1],d);this.dispatchEvent(new N(ud,{time:g}))},this)});c=M("div",{"class":"tooltip min-value",innerHTML:1868});a.appendChild(c);d=M("div",{"class":"tooltip max-value",innerHTML:1945});a.appendChild(d)};
var ud="timechange";var Z={qb:function(a){var b=[],b=-1!==a.indexOf("_"),b=-1!==a.indexOf(":")?a.split(":"):b?a.split("_"):[];return 2==b.length?a=(a=(a=(a=Z.rb(b[0])?!0:!1)&&Z.rb(b[1])?!0:!1)&&3>=b[0].length?!0:!1)&&3>=b[1].length?!0:!1:!1},rb:function(a){return/^[0-9]+$/.test(a)},ja:function(a,b,c){return a.length>c||a.length<b?!1:!0},ka:function(a,b){return b.test(a)?!0:!1},Ia:function(a,b){var c=J(a);n(c)&&(c.innerHTML="",I(c,b)&&G(c,b))},B:function(a,b,c){b=J(b);n(b)&&(b.innerHTML=a,F(b,c))},hb:function(a,b,c){a=
J(a);var d=!0;if(I(a.parentElement,"has-success")||I(a.parentElement,"has-error"))G(a.parentElement,"has-error"),G(a.parentElement,"has-success");d=d&&null!=a&&Z.ja(a.value,5,16);if(n(b)&&n(c)&&!d)return Z.B(Y("password_to_short"),b,c),F(a.parentElement,"has-error"),d;d=d&&Z.ka(a.value,/^([0-9a-zA-Z])+$/);if(n(b)&&n(c)&&!d)return Z.B(Y("password_wrong_token"),b,c),F(a.parentElement,"has-error"),d;n(b)&&(n(c)&&d)&&(G(J(b),c),G(a.parentElement,"has-error"),F(a.parentElement,"has-success"));return d},
Rb:function(a,b,c,d){a=J(a);b=J(b);if(I(b.parentElement,"has-success")||I(b.parentElement,"has-error"))G(b.parentElement,"has-error"),G(b.parentElement,"has-success");a=null!=a&&null!=b&&a.value==b.value;if(n(c)&&n(d)&&!a)return Z.B(Y("password_is_same"),c,d),F(b.parentElement,"has-error"),a;n(c)&&(n(d)&&a)&&(G(J(c),d),G(b.parentElement,"has-error"),F(b.parentElement,"has-success"));return a},Ha:function(a,b,c){a=J(a);var d=!0;if(I(a.parentElement,"has-success")||I(a.parentElement,"has-error"))G(a.parentElement,
"has-error"),G(a.parentElement,"has-success");d=d&&null!=a&&Z.ja(a.value,3,16);if(n(b)&&n(c)&&!d)return Z.B(Y("username_to_short"),b,c),F(a.parentElement,"has-error"),d;d=d&&Z.ka(a.value,/^([0-9a-zA-Z])+$/);if(n(b)&&n(c)&&!d)return Z.B(Y("username_wrong_token"),b,c),F(a.parentElement,"has-error"),d;n(b)&&(n(c)&&d)&&(G(J(b),c),G(a.parentElement,"has-error"),F(a.parentElement,"has-success"));return d},ib:function(a,b,c){a=J(a);var d=!0;if(I(a.parentElement,"has-success")||I(a.parentElement,"has-error"))G(a.parentElement,
"has-error"),G(a.parentElement,"has-success");d=d&&null!=a&&Z.ja(a.value,3,16);if(n(b)&&n(c)&&!d)return Z.B(Y("personname_to_short"),b,c),F(a.parentElement,"has-error"),d;d=d&&Z.ka(a.value,/^([a-zA-Z])+$/);if(n(b)&&n(c)&&!d)return Z.B(Y("personname_wrong_token"),b,c),F(a.parentElement,"has-error"),d;n(b)&&(n(c)&&d)&&(G(J(b),c),G(a.parentElement,"has-error"),F(a.parentElement,"has-success"));return d},Ga:function(a,b,c){a=J(a);var d=!0;if(I(a.parentElement,"has-success")||I(a.parentElement,"has-error"))G(a.parentElement,
"has-error"),G(a.parentElement,"has-success");d=d&&null!=a&&Z.ja(a.value,6,80);if(n(b)&&n(c)&&!d)return Z.B(Y("email_to_short"),b,c),F(a.parentElement,"validation-has-error"),d;var e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
d=d&&Z.ka(a.value,e);if(n(b)&&n(c)&&!d)return Z.B(Y("email_wrong_token"),b,c),F(a.parentElement,"has-error"),d;n(b)&&(n(c)&&d)&&(G(J(b),c),G(a.parentElement,"has-error"),F(a.parentElement,"has-success"));return d},validateContactForm:function(){var a=J("contact-form").getAttribute("href"),b=J("input-email").value,c=J("input-message").value,d=window.location.href?window.location.href:document.URL,e;e=Z.Ga("input-email","contact-form-validation-message","alert-danger");if(!e)return $("#contact-form-validation-message").show(),
e;$("#contact-form-validation-message").hide();Wc(a+"?message\x3d"+c+"\x26email\x3d"+b+"\x26reference\x3d"+d,function(){alert(Y("send_con_message_suc"))},function(){alert(Y("send_con_message_err"))});return!1},validateLoginForm:function(){var a;a=Z.Ha("loginUsername","validationTipsLogin","alert-danger");if(!a)return a;a=a&&Z.hb("loginPassword","validationTipsLogin","alert-danger");if(!a)return a;Z.Ia("validationTipsLogin","alert-danger");return!0},validateRegisterNewUser:function(){var a;a=Z.Ha("loginNewUsername",
"validationTipsRegisterUser","alert-danger");if(!a)return a;a=a&&Z.hb("loginNewPassword","validationTipsRegisterUser","alert-danger");if(!a)return a;a=a&&Z.Rb("loginNewPassword","loginNewPasswordValidate","validationTipsRegisterUser","alert-danger");if(!a)return a;a=a&&Z.ib("loginNewVorname","validationTipsRegisterUser","alert-danger");if(!a)return a;a=a&&Z.ib("loginNewNachname","validationTipsRegisterUser","alert-danger");if(!a)return a;a=a&&Z.Ga("loginNewEmail","validationTipsRegisterUser","alert-danger");
if(!a)return a;Z.Ia("validationTipsRegisterUser","alert-danger");return!0},resetPasswordForm:function(){var a;a=Z.Ha("inputUsername","validationTips","alert-danger");if(!a)return a;a=a&&Z.Ga("inputEmail","validationTips","alert-danger");if(!a)return a;Z.Ia("validationTips","alert-danger");return!0}};function vd(a){this.Lb=r(a)?J(a):a;this.J(this.Lb);this.Aa={};this.cb={placename:u(function(a){this.Aa.hasOwnProperty(a)?wd(this,this.Aa[a][0]):xd(this,a,u(function(a){0<a.length?wd(this,a[0]):alert("The choosen placename is unknown.")},this))},this),blattnumber:u(function(a){yd(this,a)},this)};zd(this);Ad(this);R.call(this)}x(vd,R);
vd.prototype.J=function(a){var b=M("div",{"class":"gazetteersearch-container"});a.appendChild(b);a=M("div",{"class":"form-group"});b.appendChild(a);this.o=M("input",{placeholder:Y("gazetteer_placeholder"),type:"text","class":"form-control gazetteersearch-input"});a.appendChild(this.o);this.$a=M("input",{value:Y("gazetteer_submit"),type:"submit","class":"form-control gazetteersearch-submit"});a.appendChild(this.$a)};
function zd(a){$(a.o).autocomplete({source:u(function(a,c){Z.qb(a.term)?c([]):xd(this,a.term,c)},a),delay:300,minLength:3,autoFocus:!0,select:u(function(a,c){wd(this,c.item)},a),open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}
function Ad(a){var b=u(function(a){Z.qb(a)?this.cb.blattnumber(a):this.cb.placename(-1<a.indexOf(",")?a.split(",")[0]:a)},a);Q(a.o,"keydown",function(a){13===a.keyCode&&b(this.o.value)},void 0,a);Q(a.$a,"click",function(){b(this.o.value)},void 0,a)}
function xd(a,b,c){F(a.o,"loading");oc("http://open.mapquestapi.com/nominatim/v1/search.php?featureClass\x3dP\x26style\x3dfull\x26maxRows\x3d8\x26format\x3djson\x26q\x3d"+b+"\x26viewbox\x3d4.35,58.48,27.78,45.97\x26bounded\x3d1",u(function(a){a=a.target;var e=T(a)?T(a):wc(a);a.K();a=$.map(e,function(a){return{label:a.display_name,value:a.display_name,lonlat:{x:a.lon,y:a.lat},type:a.type}});this.Aa[b]=a;c(a);I(this.o,"loading")&&G(this.o,"loading")},a),"GET")}
function yd(a,b){var c=Yc+"http://eiger.auf.uni-rostock.de/fgs/vkll/fragblattnr.php?blattnr\x3d"+b;F(a.o,"loading");oc(c,u(function(a){a=a.target;var b=T(a)?T(a):wc(a);a.K();n(b)&&s(b)?this.dispatchEvent(new N(Bd,{location_type:"blattnr",lonlat:[b.coordinates[0],b.coordinates[1]],srs:"EPSG:4326"})):alert(Y("noResultsBlattnr"));I(this.o,"loading")&&G(this.o,"loading")},a))}
function wd(a,b){a.dispatchEvent(new N(Bd,{location_type:b.type,lonlat:[b.lonlat.x,b.lonlat.y],srs:n(void 0)?void 0:"EPSG:4326"}))}var Bd="jumpto";function Cd(a){this.p=a;R.call(this)}x(Cd,R);
function Dd(a){if(n(a.p)){var b=Ic(new U(window.location.href)),c,d=4;if(b.q("z")&&b.q("c")){var e=b.get("c").split(",");c=[parseInt(e[0],0),parseInt(e[1],0)];d=parseInt(b.get("z"),0)}if(b.q("oid")){for(var f=b.get("oid").split(","),b=0;b<f.length;b++)""==f[b]&&f.splice(b,1);f.reverse();kd(f,u(function(a){a=a.target;var b=T(a)?T(a):void 0;a.K();if(n(b)){a=dd(b.docs);for(b=0;b<f.length;b++)for(var e=0;e<a.length;e++)f[b]==a[e].getId()&&this.dispatchEvent(new N("addmap",{feature:a[e]}));!c&&0<a.length&&
(c=a[0].getGeometry().getInteriorPoint().getCoordinates());Ed(this,c,d)}},a))}else n(c)&&Ed(a,c,d)}}function Fd(a){if(n(a.p)){var b="";a.p.getLayers().forEach(function(a){n(a.getId)&&(b+=a.getId()+",")});var c=a.p.getView().getCenter();a=a.p.getView().getZoom();var d=new U(window.location.origin+"/vkviewer/?welcomepage\x3doff"),e=d.l;e.set("z",a);e.set("c",c[0]+","+c[1]);e.set("oid",b);Ac(d,e);return d.toString()}}function Ed(a,b,c){a.p.getView().setCenter(b);a.p.getView().setZoom(c)};function Gd(a,b,c){$(a).hover(function(){I(this,"hover")||(c.getFeatures().clear(),c.addFeature(b),F(this,"hover"))},function(){I(this,"hover")&&(c.removeFeature(b),G(this,"hover"))})};var Hd={"\u00c4":"maptype-\u00e4",M:"maptype-m",TK:"maptype-tk",GL:"maptype-gl",ToGeoref:"georeference-false"};
function Id(a,b){this.f=r(a)?J(a):a;b||delete Hd.ToGeoref;var c="",d;for(d in Hd)c+='\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput class\x3d"facet-search-el" type\x3d"checkbox" id\x3d"'+d+'" value\x3d"'+Hd[d]+'"\x3e'+d+"\x3c/label\x3e";mb(this.f,M("div",{"class":"search-facet",innerHTML:c}));Q(this.f,"click",function(a){a=K("facet-search-el",a.currentTarget);for(var b=[],c=!0,d=0;d<a.length;d++)if(a[d].checked){var q=a[d].value.split("-")[0],w=a[d].value.split("-")[1];"georeference"!==q&&b.push({key:q,
value:w});"georeference"===q&&(c=!1)}this.dispatchEvent(new N("facet-change",{facets:b,georeference:c}))},void 0,this);R.call(this)}x(Id,R);function Jd(a){this.Va=n(a.projection)?a.projection:"EPSG:900913";this.Yb=n(a.Zb)?a.Zb:20;this.Ra=void 0;this.$=new ol.Collection;this.Ya="title";this.Eb="ascending";this.N=0;this.ea=void 0;this.I={U:n(a.time)?a.time[0]:1868,za:n(a.time)?a.time[1]:1945};this.c=a.map;this.Ma=[];this.lb=!0;this.Gb=500;Kd(this);R.call(this)}x(Jd,R);function Kd(a){a.c.on("moveend",function(){var a=Rc(this.c);n(this.Ra)&&ol.extent.equals(this.Ra,a)||this.va()},a)}
function Ld(a,b,c){var d=[a.I.U+"-01-01",a.I.za+"-01-01"],e="ascending"===a.Eb?"asc":"desc";if(a.lb){b=ol.proj.transformExtent(b,c,"EPSG:4326");b=[[b[0],b[1]],[b[0],b[3]],[b[2],b[3]],[b[2],b[1]],[b[0],b[1]]];c=a.Ya;a=a.Ma;var f=[],g=gd();f.push(jd(d));f.push(hd(b));f.push(id(a));g.query.filtered.filter.bool.must=f;g.sort[c]={order:e};return g}b=a.Ya;a=a.Ma;c=[];f=gd();c.push(jd(d));c.push(id(a));c.push({term:{georeference:!1}});f.query.filtered.filter.bool.must=c;f.sort[b]={order:e};return f}k=Jd.prototype;
k.jb=function(a){this.dispatchEvent(new N("refresh",{features:a,totalFeatureCount:this.ea}))};k.Tb=function(a){this.dispatchEvent(new N("paginate",{features:a,totalFeatureCount:this.ea}))};k.getFeatures=h("$");k.Pa=function(){return this.$.getLength()>=this.ea};
function Md(a,b,c,d){b=Ld(a,b,c);c="http://194.95.145.46/spatialdocuments/_search?from\x3d"+a.N+"\x26size\x3d"+a.Yb;var e=new jc;Ib(e,"success",function(a){a=a.target;if(T(a)){var b=T(a);this.ea=b.hits.total;a.K();a=dd(b.hits.hits);this.$.extend(a);this.N+=a.length;d.call(this,a)}else console.log("Response is empty")},!1,a);e.send(c,"POST",JSON.stringify(b))}k.refresh=function(){var a=Rc(this.c),b=this.Va;this.$.clear();this.N=0;Md(this,a,b,this.jb)};
k.va=function(){var a=Rc(this.c),b=this.Va;this.$.clear();this.N=0;Md(this,a,b,this.jb);this.Ra=za(a)};function Nd(a,b,c){this.f=r(a)?J(a):a;this.m=new Jd({projection:"EPSG:900913",map:b});Q(this.m,"refresh",u(this.bc,this));Q(this.m,"paginate",u(this.va,this));this.bb=["time","title","georeference"];this.kb=new ol.FeatureOverlay({map:b,style:function(){return[Od]}});this.Sa(this.f);Pd(this,this.f);Qd(this);Rd(this);Sd(this,c);R.call(this)}x(Nd,R);
Nd.prototype.Sa=function(a){var b=M("div",{"class":"mapsearch-container"});a.appendChild(b);a=M("div",{"class":"panel panel-default searchTablePanel"});b.appendChild(a);b=M("div",{"class":"panel-heading"});a.appendChild(b);this.nb=M("div",{"class":"content"});b.appendChild(this.nb);b=M("div",{"class":"panel-body"});a.appendChild(b);a=M("div",{"class":"mapsearch-list"});b.appendChild(a);b=M("div",{"class":"list-header"});a.appendChild(b);for(var c=0;c<this.bb.length;c++){var d=b,e=this.bb[c],f=M("div",
{"class":"inner-col "+e}),e=M("div",{"data-type":e,"class":"sort-element "+e,innerHTML:Y(e)+' \x3cspan class\x3d"caret caret-reversed"\x3e\x3c/span\x3e'});f.appendChild(e);d.appendChild(f)}this.O=M("ul",{id:"mapsearch-contentlist","class":"mapsearch-contentlist"});a.appendChild(this.O)};
function Rd(a){n(a.O)&&Q(a.O,"click",function(a){a.preventDefault();var c=Tc(a.D.target,"mapsearch-record"),d;this.m.getFeatures().forEach(function(a){a.get("id")==c.id&&(d=a)});this.dispatchEvent(new N("click-record",{feature:d}))},void 0,a)}
function Pd(a,b){for(var c=K("sort-element",b),d=0;d<c.length;d++)Q(c[d],"click",function(a){a=a.target.getAttribute("data-type");for(var b=L("sort-element."+a),c=I(b,"ascending")?"descending":"ascending",d=K("sort-element"),q=0;q<d.length;q++)G(d[q],"descending"),G(d[q],"ascending");F(b,c);this.m.Ya=a;this.m.Eb=c;this.m.refresh()},void 0,a)}
function Qd(a){var b=!1;n(a.O)&&Q(a.O,"scroll",function(a){if(!b){b=!0;a=a.currentTarget;if(a.offsetHeight+a.scrollTop>=a.scrollHeight&&!this.m.Pa()&&(a=this.m,a.N<a.ea&&a.N<a.Gb)){var d=Rc(a.c);Md(a,d,a.Va,a.Tb)}b=!1}},void 0,a)}function Sd(a,b){Q(b,"facet-change",function(a){var b=this.m;a=a.target;b.lb=a.georeference;b.Ma=a.facets;b.va()},void 0,a)}
function Td(a,b){for(var c=0;c<b.length;c++){var d,e=b[c];d=M("li",{"class":"mapsearch-record type "+e.get("maptype"),id:e.get("id")});var f=M("span",{"class":"data-col time",innerHTML:parseInt(e.get("time"),0)});d.appendChild(f);f=M("span",{"class":"data-col title",innerHTML:e.get("title")});d.appendChild(f);f=M("span",{"class":"data-col time",innerHTML:1});d.appendChild(f);f=M("div",{"class":"view-item"});d.appendChild(f);var g=M("a",{"class":"thumbnail",href:"#"});f.appendChild(g);var m=M("img",
{onerror:'this.onerror\x3dnull;this.src\x3d"http://www.deutschefotothek.de/images/noimage/image120.jpg"',alt:"...",src:e.get("thumb")});g.appendChild(m);g=M("div",{"class":"overview"});f.appendChild(g);f=M("h2",{innerHTML:e.get("title")});g.appendChild(f);f=M("p",{"class":"details"});g.appendChild(f);e=M("div",{"class":"timestamp",innerHTML:Y("timestamp")+" "+e.get("time")});f.appendChild(e);e=M("div",{"class":"scale",innerHTML:Y("scale")+" 1:25.000"});f.appendChild(e);a.O.appendChild(d);n(a.kb)&&
Gd(d,b[c],a.kb)}}Nd.prototype.getFeatures=function(){return this.m.getFeatures()};Nd.prototype.bc=function(a){Ud(this,a.target.totalFeatureCount);this.O.innerHTML="";Td(this,a.target.features)};Nd.prototype.va=function(a){Ud(this,a.target.tc);Td(this,a.target.features)};function Ud(a,b){a.nb.innerHTML=0<b?b+" "+Y("found_mtb"):Y("found_no_maps")};function Vd(a,b,c){this.t=r(a)?J(a):a;this.J(this.t);this.Ib=new vd(this.fa);this.Ob=new td(this.fa);a=this.fa;c=new Id(a,c);this.Kb=new Nd(a,b,c)}Vd.prototype.J=function(a){var b=M("div",{"class":"spatialsearch-inner-container"});a.appendChild(b);a=M("div",{"class":"spatialsearch-content-panel"});b.appendChild(a);b=M("div",{"class":"header-container"});a.appendChild(b);this.Jb=M("div",{"class":"content"});b.appendChild(this.Jb);this.fa=M("div",{"class":"body-container"});a.appendChild(this.fa)};new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0, 0, 255, 1.0)",width:2})});var Od=new ol.style.Style({stroke:new ol.style.Stroke({color:"#f00",width:1}),fill:new ol.style.Fill({color:"rgba(255,0,0,0.1)"})}),Wd=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000000",width:2})});new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),qc:new ol.style.Circle({Bb:7,fill:new ol.style.Fill({color:"#ffcc33"})})});
new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#319FD3",width:1.5})}),text:new ol.style.Text({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:"Test",fill:new ol.style.Fill({color:"#aa3300"}),stroke:new ol.style.Stroke({color:"#ffffff",width:3}),offsetX:10,offsetY:-5})});
new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#29A329",width:1.5})})});new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255,0,0,0.1)"}),stroke:new ol.style.Stroke({color:"#f00",width:1})}),zIndex:1E5});function Xd(a){this.gc=eb(a);this.Da=n(a.id)?a.id:void 0;this.jc=n(a.objectid)?a.objectid:void 0;this.ic=n(a.metadata)&&s(a.metadata)?a.metadata:void 0;this.eb=a.time;this.kc=a.projection;this.fb=n(a.title)?a.title:void 0;this.Nb=n(a.thumbnail)?a.thumbnail:"/vkviewer/static/images/layer_default.png";this.Ca=n(a.displayinlayermanagement)&&"boolean"==typeof a.displayinlayermanagement?a.displayinlayermanagement:!0;this.Hb=n(a.border)?a.border:void 0;var b=new ol.Feature(new ol.geom.Polygon([this.Hb]));
b.setProperties({objectid:this.Da,time:this.eb,title:this.fb});b.setId(this.Da);for(var c=[],d=0;d<fd.length;d++)c.push(fd[d]+a.dataid+"/{z}/{x}/{-y}.png");c=new ol.layer.Tile({extent:a.extent,source:new ol.source.XYZ({maxZoom:15,urls:c})});b=new ol.layer.Vector({source:new ol.source.Vector({features:[b]}),style:function(){return[Wd]}});a.layers=[c,b];ol.layer.Group.call(this,a)}ol.inherits(Xd,ol.layer.Group);Xd.prototype.getTime=h("eb");Xd.prototype.mb=h("Ca");Xd.prototype.getId=h("Da");function Yd(a,b,c,d,e){if(!(A||D&&E("525")))return!0;if(Ka&&e)return Zd(a);if(e&&!d||!c&&(17==b||18==b||Ka&&91==b))return!1;if(D&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(A&&d&&b==a)return!1;switch(a){case 13:return!(A&&A&&9<=Ua);case 27:return!D}return Zd(a)}
function Zd(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||D&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function $d(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function ae(a,b){R.call(this);a&&(this.pa&&this.detach(),this.Q=a,this.oa=Q(this.Q,"keypress",this,b),this.Qa=Q(this.Q,"keydown",this.Vb,b,this),this.pa=Q(this.Q,"keyup",this.Wb,b,this))}x(ae,R);k=ae.prototype;k.Q=null;k.oa=null;k.Qa=null;k.pa=null;k.j=-1;k.F=-1;k.Fa=!1;
var be={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ce={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},de=A||D&&E("525"),ee=Ka&&C;k=ae.prototype;
k.Vb=function(a){D&&(17==this.j&&!a.ctrlKey||18==this.j&&!a.altKey||Ka&&91==this.j&&!a.metaKey)&&(this.F=this.j=-1);-1==this.j&&(a.ctrlKey&&17!=a.keyCode?this.j=17:a.altKey&&18!=a.keyCode?this.j=18:a.metaKey&&91!=a.keyCode&&(this.j=91));de&&!Yd(a.keyCode,this.j,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.F=C?$d(a.keyCode):a.keyCode,ee&&(this.Fa=a.altKey))};k.Wb=function(a){this.F=this.j=-1;this.Fa=a.altKey};
k.handleEvent=function(a){var b=a.D,c,d,e=b.altKey;A&&"keypress"==a.type?(c=this.F,d=13!=c&&27!=c?b.keyCode:0):D&&"keypress"==a.type?(c=this.F,d=0<=b.charCode&&63232>b.charCode&&Zd(c)?b.charCode:0):Ia?(c=this.F,d=Zd(c)?b.keyCode:0):(c=b.keyCode||this.F,d=b.charCode||0,ee&&(e=this.Fa),Ka&&(63==d&&224==c)&&(c=191));var f=c,g=b.keyIdentifier;c?63232<=c&&c in be?f=be[c]:25==c&&a.shiftKey&&(f=9):g&&g in ce&&(f=ce[g]);a=f==this.j;this.j=f;b=new fe(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};
k.getElement=h("Q");k.detach=function(){this.oa&&(Kb(this.oa),Kb(this.Qa),Kb(this.pa),this.pa=this.Qa=this.oa=null);this.Q=null;this.F=this.j=-1};k.v=function(){ae.ca.v.call(this);this.detach()};function fe(a,b,c,d){d&&wb(this,d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}x(fe,O);function ge(a){a=a||{};this.u=n(a.spyLayer)?a.spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.OSM({attribution:void 0})});var b=M("a",{"class":"ol-has-tooltip",href:"#layerspy",innerHTML:"L"}),c=M("div",{"class":"ol-layerspy ol-unselectable"});c.appendChild(b);var d=M("span",{role:"tooltip",innerHTML:Y("layerspy")});b.appendChild(d);this.W=n(a.Bb)?parseInt(a.Bb,0):75;var e=null;this.e={};this.e.yb=function(a){a.context.restore()};this.e.zb=function(a){var b=a.context;a=a.frameState.pixelRatio;
b.save();b.beginPath();e&&(b.arc(e[0]*a,e[1]*a,this.W*a,0,2*Math.PI),b.lineWidth=5*a,b.strokeStyle="rgba(0,0,0,0.5)",b.stroke());b.clip()};this.e.ub=function(a){e=this.getMap().getEventPixel(a.D);this.getMap().render()};this.e.vb=function(){e=null;this.getMap().render()};this.e.sb=function(a){89===a.keyCode?(this.W=Math.min(this.W+5,150),this.getMap().render()):88===a.keyCode&&(this.W=Math.max(this.W-5,25),this.getMap().render())};this.e.gb=function(a){a.target.getArray()[a.target.getLength()-1]!==
this.u&&(this.getMap().removeLayer(this.u),this.getMap().addLayer(this.u))};this.ga=null;Q(b,"click",function(){I(b,"active")?(this.u.un("precompose",this.e.zb,this),this.u.un("postcompose",this.e.yb,this),Jb(this.getMap().getViewport(),"mousemove",this.e.ub,void 0,this),Jb(this.getMap().getViewport(),"mouseout",this.e.vb,void 0,this),this.getMap().removeLayer(this.u),G(b,"active"),Jb(this.ga,"key",this.e.sb,void 0,this),this.getMap().getLayers().un("add",this.e.gb,this)):(this.getMap().addLayer(this.u),
this.u.on("precompose",this.e.zb,this),this.u.on("postcompose",this.e.yb,this),Q(this.getMap().getViewport(),"mousemove",this.e.ub,void 0,this),Q(this.getMap().getViewport(),"mouseout",this.e.vb,void 0,this),F(b,"active"),this.ga=this.ga||new ae(document),Q(this.ga,"key",this.e.sb,void 0,this),this.getMap().getLayers().on("add",this.e.gb,this))},void 0,this);ol.control.Control.call(this,{element:c,target:a.target})}ol.inherits(ge,ol.control.Control);function he(a){function b(a){a.preventDefault();e.getMap().getView().setRotation(0)}a=a||{};var c=document.createElement("a");c.href="#rotate-north";c.innerHTML="N";c.className="ol-has-tooltip";var d=M("span",{role:"tooltip",innerHTML:Y("rotatenorth")});c.appendChild(d);var e=this;Q(c,"click",b,void 0,this);Q(c,"touchstart",b,void 0,this);d=document.createElement("div");d.className="rotate-north ol-unselectable";d.appendChild(c);ol.control.Control.call(this,{element:d,target:a.target})}
ol.inherits(he,ol.control.Control);function ie(a){a=a||{};var b=M("div",{"class":"permalink ol-unselectable"}),c=M("a",{href:"#permalink",innerHTML:"P","class":"ol-has-tooltip"});b.appendChild(c);var d=M("span",{role:"tooltip",innerHTML:Y("permalink")});c.appendChild(d);var e=M("form",{id:"permaCopyBox",style:"display:none;"}),d=M("div",{"class":"permaClose"});e.appendChild(d);d=M("div",{"class":"nose"});e.appendChild(d);d=M("div",{"class":"moreDots",innerHTML:"..."});e.appendChild(d);var f=M("input",{type:"text",id:"permalinkResult",
readonly:"readonly",value:"#"});e.appendChild(f);d="MacIntel"==navigator.platform?"\x26#8984;":"Strg";d=M("label",{"for":"permalinkResult",innerHTML:Y("permalink_msg")+" "+d+"+C."});e.appendChild(d);b.appendChild(e);var g=void 0,d=u(function(a){a.preventDefault();g||(g=new Cd(this.getMap()));$(e).hasClass("open")?($(e).fadeOut().removeClass("open"),$(f).blur()):(f.value=Fd(g),$(e).fadeIn().addClass("open"),$(f).focus().select())},this);Q(c,"click",d);Q(c,"touchstart",d);ol.control.Control.call(this,
{element:b,target:a.target})}ol.inherits(ie,ol.control.Control);function je(a,b){this.Mb={};gb(this.Mb,a);new ol.style.Style({stroke:new ol.style.Stroke({color:"#000000",width:3})});this.c=new ol.Map({layers:[new ol.layer.Tile({source:new ol.source.OSM})],renderer:"canvas",target:b,interactions:ol.interaction.defaults().extend([new ol.interaction.DragRotateAndZoom]),controls:[new ol.control.Attribution({oc:!1,collapsed:!1}),new ol.control.Zoom,new ol.control.FullScreen,new ge({spyLayer:new ol.layer.Tile({mc:void 0,source:new ol.source.OSM})}),new he,new ol.control.ScaleLine,
new ie],view:new ol.View({projection:"EPSG:900913",minResolution:1.194328566789627,maxResolution:2445.9849047851562,extent:[640161.933,5958026.134,3585834.8011505,7847377.4901306],center:[1531627.8847864927,6632124.286850829],zoom:4})});ke(this.c)}function le(a,b){Q(b,"jumpto",function(a){var b=this.c.getView(),e=a.target.lonlat;b.setCenter(ol.proj.transform([parseFloat(e[0]),parseFloat(e[1])],a.target.srs,"EPSG:900913"));b.setZoom(5)},void 0,a)}
function me(a,b){a.Ta=b;Q(a.Ta,"click-record",function(a){a=a.target.feature;a.get("georeference")?this.c.addLayer(ne(a)):oe([a])},void 0,a)}function pe(a,b){Q(b,"addmap",function(a){this.c.addLayer(ne(a.target.feature))},void 0,a)}
function qe(a,b){Q(b,"timechange",function(a){var b=this.Ta.m,e=a.target.time[0];a=a.target.time[1];var f=b.I.U;if(null!=e&&fa(e)){if(e>b.I.za)throw{name:"WrongParameterExecption",message:"Start value shouldn't be higher than the end value."};b.I.U=e}if(null!=a&&fa(a)){if(a<b.I.U)throw b.I.U=f,{name:"WrongParameterExecption",message:"End value shouldn't be lower than the start value."};b.I.za=a}this.Ta.m.refresh()},void 0,a)}
function ne(a){return new Xd({time:a.get("time"),border:a.getGeometry().getCoordinates()[0],extent:a.getGeometry().getExtent(),thumbnail:a.get("thumb"),title:a.get("title"),objectid:a.get("id"),id:a.getId(),dataid:a.get("dataid")})}function ke(a){a.on("singleclick",function(a){var c=[];this.forEachFeatureAtPixel(a.pixel,function(a){c.push(a)});oe(c)})}
function oe(a){if(0<a.length){var b=new Vc("vk2-overlay-modal",document.body,!0);b.open(void 0,"mapcontroller-click-modal");for(var c=M("section"),d=0;d<a.length;d++){var e=M("a",{href:"/vkviewer/static/profile-map?objectid\x3d"+a[d].getId(),innerHTML:a[d].get("title")+" "+a[d].get("time")});c.appendChild(e);var f=M("br");c.appendChild(f)}d=L("modal-body",b.A);s(c)&&1==c.nodeType&&(d.appendChild(c),rd(b,c));1==a.length&&e.click()}}je.prototype.getMap=h("c");
function re(a,b){me(a,b.Kb);qe(a,b.Ob);le(a,b.Ib)};function se(a,b,c){this.t=r(a)?J(a):a;a=n(c)&&r(c)?c:"horizontal";this.J(this.t);this.Ba(this.X,b,a)}se.prototype.J=function(a){var b=M("div",{"class":"opacity-container"});a.appendChild(b);a=M("div",{"class":"slider-container opacity-slider"});b.appendChild(a);this.X=M("div",{"class":"slider"});a.appendChild(this.X)};
se.prototype.Ba=function(a,b,c){function d(a,b){"vertical"==c?b.style.top=100-100*((a-0)/100)+"%":b.style.left=100*((a-0)/100)+"%";b.innerHTML=a+"%"}var e=100*b.getOpacity();$(a).slider({min:0,max:100,value:e,animate:"slow",orientation:c,step:1,slide:function(a,c){var e=c.value;d(e,f);b.setOpacity(e/100)},change:u(function(a,c){var e=c.value;d(e,f);b.setOpacity(e/100)},this)});var f=M("div",{"class":"tooltip value",innerHTML:"100%"});a.appendChild(f);b.on("change:opacity",function(){var b=100*this.getOpacity();
19<Math.abs(b-$(a).slider("value"))&&$(a).slider("value",b)})};function te(a,b,c){var d=a.getVisible()?"visible":"notvisible",e=M("li",{"class":"layermanagement-record "+d,id:b,"data-id":a.getId()});b=M("div",{"class":"control-container"});e.appendChild(b);d=M("button",{"class":"move-layer-top minimize-tool",type:"button",title:Y("moveToTop"),innerHTML:Y("moveToTop")});b.appendChild(d);Q(d,"click",function(b){c.removeLayer(a);c.addLayer(a);b.stopPropagation()});d=M("button",{"class":"disable-layer minimize-tool",type:"button",title:Y("showLayer"),innerHTML:Y("showLayer")});
b.appendChild(d);Q(d,"click",function(){I(e,"visible")?($a(e,"visible","notvisible"),a.setVisible(!1)):($a(e,"notvisible","visible"),a.setVisible(!0))});d=M("button",{"class":"remove-layer minimize-tool",type:"button",title:Y("removeLayer"),innerHTML:Y("removeLayer")});b.appendChild(d);Q(d,"click",function(b){c.removeLayer(a);b.stopPropagation()});d=M("div",{"class":"drag-btn"});b.appendChild(d);d=M("a",{"class":"thumbnail",href:"#"});e.appendChild(d);var f=M("img",{onerror:'this.onerror\x3dnull;this.src\x3d"http://www.deutschefotothek.de/images/noimage/image120.jpg"',
alt:"...",src:a.Nb});d.appendChild(f);d=M("div",{"class":"metadata-container"});e.appendChild(d);f=M("h4",{innerHTML:a.fb});d.appendChild(f);f=M("div",{"class":"timestamps"});d.appendChild(f);d=M("span",{"class":"timestamps-label",innerHTML:Y("timestamp")+" "+a.getTime()});f.appendChild(d);Qc.get("auth_tkt")&&(d=M("a",{"class":"georeference-update",innerHTML:Y("updateGeoref")+" ...",target:"_blank",href:"/vkviewer/georeference?id\x3d"+a.getId()}),b.appendChild(d));new se(e,a,"vertical");a.on("change:visible",
function(){!a.getVisible()&&I(e,"visible")?$a(e,"visible","notvisible"):a.getVisible()&&I(e,"notvisible")&&$a(e,"notvisible","visible")});return e};function ue(a,b){this.la=n(b)?b:void 0;this.f=n(a)?a:void 0;this.h=!1}function ve(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=a[b],d=0;d<c.length;d++)c[d].setOpacity(0),c[d].setVisible(!0)}function we(a,b){ve(b);({start:function(a,b,e){if(e.h){for(var f in a)break;var g=n(a[f])?a[f]:[];delete a[f];a=u(this.start,this,a,b,e);Sb(v(e.cc,g,a),b,e);n(e.la)&&(e.la.innerHTML=n(f)?f:"");n(f)||(console.log("Visualization finished ...."),e.h=!1,n(e.f)&&G(e.f,"play"))}}}).start(b,500,a)}
function xe(a,b){for(var c=a.sort(function(a,b){return a.getTime()>b.getTime()?1:a.getTime()<b.getTime()?-1:0}),d=0;d<c.length;d++)b.removeLayer(c[d]),b.addLayer(c[d]);for(var e={},d=0;d<c.length;d++)c[d].getTime()in e?e[c[d].getTime()].push(c[d]):e[c[d].getTime()]=[c[d]];return e}
ue.prototype.cc=function(a,b){({pb:function(a,b,e,f,g){if(g.h){var m=a[0].getOpacity()+b;if(1.05>=m){for(var q=0;q<a.length;q++)a[q].setOpacity(m);Sb(v(this.pb,a,b,e,f,g),e,this)}else n(f)&&f()}},start:function(a,b,e,f,g){for(var m=0;m<a.length;m++)a[m].setOpacity(0),a[m].setVisible(!0);Sb(v(this.pb,a,b,e,f,g),e,this)}}).start(a,0.1,500,b,this)};function ye(a){a.h=!1;n(a.la)&&(a.la.innerHTML=n(void 0)?void 0:"");n(a.f)&&G(a.f,"play")};function ze(a){this.c=a;this.f=M("div",{"class":"dyn-vis-control"});a=M("div",{"class":"content",style:"display:none;"});this.f.appendChild(a);var b=M("div",{"class":"feedback"});a.appendChild(b);this.Ka=new ue(this.f,b);Ae(this,a);Be(this,this.f,a)}
function Be(a,b,c){var d=M("a",{innerHTML:"o","class":"open-dyn-vis"});b.insertBefore(d,b.childNodes[0]||null);Q(d,"click",function(a){$(c).slideToggle();I(a.currentTarget,"open")?(ye(this.Ka),G(a.currentTarget,"open")):F(a.currentTarget,"open")},void 0,a)}
function Ae(a,b){var c=M("div",{"class":"start-container"});b.appendChild(c);var d=M("a",{href:"#dynamic-start",title:Y("dynMapVisStart"),innerHTML:"Start"});c.appendChild(d);Q(d,"click",function(){for(var a=this.c.getLayers().getArray(),b=[],c=0;c<a.length;c++)a[c]instanceof Xd&&b.push(a[c]);a=this.Ka;c=this.c;a.h||(a.h=!0,b=xe(b,c),we(a,b),n(a.f)&&!I(a.f,"play")&&F(a.f,"play"))},void 0,a);c=M("span",{role:"tooltip",innerHTML:Y("dynMapVisStart")});d.appendChild(c);c=M("div",{"class":"stop-container"});
b.appendChild(c);d=M("a",{href:"#dynamic-stop",title:Y("dynMapVisStop"),innerHTML:"Stop"});c.appendChild(d);Q(d,"click",function(){ye(this.Ka)},void 0,a);c=M("span",{role:"tooltip",innerHTML:Y("dynMapVisStop")});d.appendChild(c)}ze.prototype.getElement=h("f");function Ce(a,b,c){this.t=r(a)?J(a):a;this.C=b;this.c=c;this.Ub=new ze(this.c);this.Sa(this.t,this.Ub);this.C.on("add",this.ab,this);this.C.on("remove",this.ab,this);R.call(this)}x(Ce,R);function De(a){a=a.C.getArray();for(var b=[],c=0,d=a.length;c<d;c++)n(a[c].mb)&&a[c].Ca&&b.push(a[c]);return b}function Ee(a,b){for(var c=a.C.getArray(),d=0,e=c.length;d<e;d++)if(b===c[d])return d}
Ce.prototype.Sa=function(a,b){var c=M("div",{"class":"layermanagement-container",id:"layermanagement-container"});a.appendChild(c);var d=M("div",{"class":"heading"});c.appendChild(d);var e=M("span",{"class":"header-label",innerHTML:Y("layermanagement_label")});d.appendChild(e);e=b.getElement();d.appendChild(e);this.V=M("ul",{"class":"layermanagement-body",innerHTML:'\x3cli class\x3d"empty"\x3e'+Y("start_message")+"\x3c/li\x3e"});c.appendChild(this.V)};
Ce.prototype.ab=function(a){if(n(a.element.mb)&&a.element.Ca){this.V.innerHTML="";a=De(this);for(var b=a.length-1;0<=b;b--){var c=te(a[b],b,this.c);this.V.appendChild(c)}}$(this.V).sortable({revert:!0,handle:".drag-btn",stop:u(function(a,b){var c=De(this),g=K("layermanagement-record",this.V),m=g.length-parseInt(g[b.item.index()].id,0)-1,q=b.item.index(),w=c.length-1-q,g=parseInt(g[q].id,0);n(g)&&m!=q&&(m=c[g],q=Ee(this,m),this.C.removeAt(q),c=Ee(this,c[w]),w>g?this.C.insertAt(c+1,m):this.C.insertAt(c,
m))},this)})};Ce.prototype.getLayers=function(){return this.C.getArray()};ba("vk2.app.MapProfileApp",function(a){var b=n(void 0)?Sc(void 0).get("objectid"):Sc().get("objectid");null!=b?oc("http://194.95.145.46/spatialdocuments/map/"+b,u(function(b){if(b=T(b.target))b=cd(b._id,b._source),pd(b,a)},this)):console.log("Could not identify objectid.")});
ba("vk2.app.PresentationApp",function(a){Xc();navigator.cookieEnabled||alert("For proper working of the virtuel map forum 2.0 please activate cookies in your browser");var b=n(a.authenticate)&&"boolean"==typeof a.authenticate&&a.authenticate?!0:!1;Uc(n(a.modalAnchorClassName)?a.modalAnchorClassName:"vk2-modal-anchor");J("vk2WelcomePage")&&J("vk2WelcomePage").click();var c=new je(ed,a.mapContainerId),b=new Vd(a.spatialsearchContainerId,c.getMap(),b);re(c,b);new Ce(a.mapContainerId,c.getMap().getLayers(),
c.getMap());b=new Cd(c.getMap());Dd(b);pe(c,b);setTimeout(function(){for(var b=L("ol-overlaycontainer-stopevent",J(a.mapContainerId)),c=0;c<b.children.length;c++){var f=b.children[c];if(I(f.children[0],"ol-has-tooltip"))for(var f=K("ol-has-tooltip",f),g=0;g<f.length;g++)f[g].setAttribute("title",f[g].children[0].innerHTML)}},500)});